name: Frontend CI (Vite Build)

on:
  push:
    branches: [ "**" ] # 브랜치 이름이 master라면 수정 필요
  pull_request:
    branches: [ "**" ]

jobs:
  build-check:
    runs-on: ubuntu-latest

    strategy:
      matrix:
        node-version: [20.x] # Vite 6.x는 최신 Node 버전(18, 20+) 권장

    steps:
    # 1. 코드 가져오기
    - name: Checkout code
      uses: actions/checkout@v4

    # 2. Node.js 설정
    - name: Setup Node.js ${{ matrix.node-version }}
      uses: actions/setup-node@v4
      with:
        node-version: ${{ matrix.node-version }}
        cache: 'npm'

    # 3. 의존성 설치
    # package-lock.json이 있다면 npm ci가 더 빠르고 안전합니다.
    # 만약 lock 파일이 없다면 npm install로 변경해서 사용하세요.
    - name: Install dependencies
      run: npm ci

    # 4. 빌드 확인 (핵심 단계)
    # Vite 빌드가 실패하면 여기서 에러가 나고, PR에 빨간불이 들어옵니다.
    - name: Build Project
      run: npm run build